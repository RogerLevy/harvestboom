: move-about
    0 0 vx v!
    <up> held? if -2e vy fs! then
    <down> held? if 2e vy fs! then
    <left> held? if -2e vx fs! then
    <right> held? if 2e vx fs! then ;

farm.bmp  17 16 * 0  32 32  al_create_sub_bitmap constant boy.bmp

%actor kind: %player
    var map
;kind

: lay-gems
    <space> held? if
        65 x v@ 16 / swap 16 / swap map @ loc !
    then ;
    
%player m: init
    16 16 w v!
    step>  move-about lay-gems
    physics>  map @ ?dup if  collide-tilemap  then  vx fv@ 2delta* x fv+!
    draw>  -8 -16 +at boy.bmp blit ;
